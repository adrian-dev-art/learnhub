{% extends 'shared/base.html' %}
{% load admin_dashboard_tags %}

{% block title %}Owner Dashboard - GampangBelajar{% endblock %}
{% block page_title %}Owner Dashboard{% endblock %}

{% block content %}
<div class="container">
  <!-- Financial Overview -->
  <div class="stats-grid mb-4">
    <div class="stat-card">
      <div class="stat-icon" style="background: rgba(16, 185, 129, 0.15); color: #10b981;">
        <span class="material-icons">payments</span>
      </div>
      <div class="stat-info">
        <h3>Rp {{ total_revenue|rupiah }}</h3>
        <p>Total Revenue</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: rgba(59, 130, 246, 0.15); color: #3b82f6;">
        <span class="material-icons">account_balance</span>
      </div>
      <div class="stat-info">
        <h3>Rp {{ platform_profit|rupiah }}</h3>
        <p>Platform Profit</p>
      </div>
    </div>
  </div>

  <div class="grid-2-col">
    <!-- Top Courses -->
    <div class="content-card">
      <div class="card-header-premium">
        <span class="material-icons">trending_up</span>
        <h2>Top Performing Courses</h2>
      </div>
      <div class="list-container">
        {% for course in top_courses %}
        <div class="list-item-premium">
          <div class="item-details">
            <span class="item-title">{{ course.title }}</span>
            <span class="item-meta">Mentor: {{ course.mentor }}</span>
          </div>
          <div class="item-action">
            <span class="badge-premium">{{ course.enrollment_count }} enrollments</span>
          </div>
        </div>
        {% empty %}
        <p class="text-muted p-4 text-center">No course data available.</p>
        {% endfor %}
      </div>
    </div>

    <!-- Recent Enrollments -->
    <div class="content-card">
      <div class="card-header-premium">
        <span class="material-icons">history</span>
        <h2>Recent Enrollments</h2>
      </div>
      <div class="list-container">
        {% for enrollment in recent_enrollments %}
        <div class="list-item-premium">
          <div class="item-details">
            <span class="item-title">{{ enrollment.user.username }}</span>
            <span class="item-meta">{{ enrollment.course.title }}</span>
          </div>
          <div class="item-action" style="text-align: right;">
            <span class="badge-success-premium" style="display: inline-block; margin-bottom: 4px;">Paid</span>
            <div class="item-meta" style="font-size: 11px;">{{ enrollment.enrolled_at|date:"M d, Y" }}</div>
          </div>
        </div>
        {% empty %}
        <p class="text-muted p-4 text-center">No recent enrollments.</p>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
